"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1216],{91216:function(e,n,t){t.d(n,{Ge:function(){return f},Mq:function(){return h},Nl:function(){return m},lN:function(){return _}});var a=t(37340),r=t(41972),i=t(64210),s=t(86242);function o(){let e=(0,a._)(['\n  content[]{\n    ...,\n    "videoForDesktop": videoForDesktop.asset->url,\n    "videoForMobile": videoForMobile.asset->url,\n    "imageForDesktop": {\n      "image": imageForDesktop.image.asset->url,\n      "alt": imageForDesktop.alt\n    },\n    "imageForMobile": {\n      "image": imageForMobile.image.asset->url,\n      "alt": imageForMobile.alt\n    },\n    "heroInfoSectionCta": cta {\n      ...,\n      "landingPageRoute": landingPageRoute->.slug.current\n    },\n    heroInfoSectionImages[]{\n      ...,\n      "image": image.asset->url,\n      "video": video.asset->url\n    },\n    cards[]{\n      ...,\n      "video": video.asset->url,\n      cta {\n        ...,\n        "landingPageRoute": landingPageRoute->.slug.current\n      }\n    },\n    illustrations[]{\n      ...,\n      "video": video.asset->url,\n    },\n    "recommendationsByGroups": recommendationsByGroups[]->{\n      ...,\n      groups[]{\n        ...,\n        callToAction {\n          ...,\n          "landingPageRoute": landingPageRoute->.slug.current\n        },\n        recommendations[]->{\n          groupTitle, groupID, markets,\n          _type == "offer" => {\n            ...,\n            "slug": slug.current,\n            "heroImage": coverImage.image.asset->url,\n            akOffer[]->{\n              items[]{\n                "description": longDescription,\n                markets,\n              }\n            }\n          },\n          _type == "tailorMades" && !(_id in path("drafts.**")) => {\n            ...,\n            hotspots {\n              areas[!additional]{\n              additional, initialLength,\n              "city": city->.name,\n              }\n            },            \n            \'offers\': offers[]{\n                "offerDocument": *[_type == "offer" && references(^.offer._ref)][0]{\n                  _id,\n                  "akOffer": akOffer[]->{\n                    isPrepaid, items[], _id, journeys[]->{_id, code, title}\n                  },\n                  title, shortTitle, slug, markets, expirationDate, weight\n                }\n              }.offerDocument,\n            "destinations": hotspots.areas[!additional].city->.name,\n            "photo": heroImages[0].image, tags,\n            title, "type": select(_type==\'tailorMades\' => \'tailormade journey\', subType),\n            "duration": select(_type==\'tailorMades\' => initialDuration, lengthDays),\n            "capacity": groupSize,\n            "prices": initialPrices[price > 0]{currency,price},\n            "slug": select(\n              type match \'*tailormade*\' => \'/\' + slug.current,\n              \'/journeys/\' + slug.current\n            )\n          },\n          _type == "journeys" && !(_id in path("drafts.**")) && hasAvailableDates && !(packageTypeId in [8, 17, 28, 40, 42])\n          && packageTypeId in [','] => {\n            \'photo\': heroImages[0].image.asset._ref,\n            _type, _id, overviewText, map,\n            "dayByDay": dayByDay[day % 1 == 0]{\n              day, dayTitle, mapInfo,\n              cities[] {\n                city,\n              },\n              cityName\n            },\n            \'offers\': dates[].offers[]{\n              "offerDocument": *[_type == "offer" && references(^.offer._ref)][0]{\n                _id,\n                "akOffer": akOffer[]->{\n                  isPrepaid, items[], _id, journeys[]->{_id, code, title}\n                },\n                title, shortTitle, slug, markets, expirationDate, weight\n              }\n            }.offerDocument,\n            offerFlags, code,\n            "photo": heroImages[0].image, tags,\n            title, "type": select(_type==\'tailorMades\' => \'tailormade journey\', subType),\n            "duration": select(_type==\'tailorMades\' => initialDuration, lengthDays),\n            "destinations": array::unique(dayByDay[defined(day) && round(day) == day].cities[].city),\n            "capacity": groupSize,\n            "prices": select(\n              _type==\'tailorMades\' => initialPrices[]{currency,price},\n              packageTypeId in [11,16,19,21,43] => *[_type==^._type && !(_id in path("drafts.**"))\n                && slug.current==^.slug.current].dates[].listOfSuitesPrices[].prices[price > 0]{currency,price},\n              packageTypeId in [35,36,39,44] => coalesce(*[_type==^._type && !(_id in path("drafts.**"))\n                && slug.current==^.slug.current].initialPrices[display==true && price > 0]{currency,price},[]),\n              *[_type==^._type && !(_id in path("drafts.**"))\n              && slug.current==^.slug.current].dates[].prices[price > 0]{currency,price}\n            ),\n            "slug": select(\n              type match \'*tailormade*\' => \'/\' + slug.current,\n              \'/journeys/\' + slug.current\n            )\n          },\n          _type == "customRecommendation" || _type == "customDestination" => {\n            ...,\n            "markets": markets,\n            "heroImage": coverImage.image.asset->url,\n            "cta": cta {\n              ...,\n              "landingPageRoute": landingPageRoute->.slug.current\n            },\n          }\n        }\n      }\n    },\n    "video": video.asset->.url, \n    \'videoDesktop\': videoDesktop.asset->.url,\n    \'videoMobile\': videoMobile.asset->.url,\n    \'offers\': offers[]->{..., "slug": slug.current},\n    "cardItems": cardItems[]->{\n        _id,\n        title,\n        sectionId,\n        cssClass,\n        rotationTimer,\n        "markets": markets,\n        "cards": cards[]{\n          ...,\n        _type == "Journey" => {\n        _type,\n        descriptionOverride,\n        ctaText,\n        expirationDate,\n        googleTagEvent,\n        journey->{\n          _id,\n          title,\n          slug,\n          overviewText,\n          "type": subType,\n          "heroImage": heroImages[0].image.asset->url,\n          "heroMobileImage": heroImagesMobile[0].image.asset->url\n        }\n      },\n      _type == "Tailormade" => {\n        _type,\n        descriptionOverride,\n        ctaText,\n        expirationDate,\n        googleTagEvent,\n        tailormade->{\n          _id,\n          title,\n          slug,\n          type,\n          year,\n          description,\n          "heroImage": heroImages[0].image.asset->url,\n          "heroMobileImage": mobileHeroImages[0].image.asset->url\n        }\n      },\n      _type == "Stay" => {\n        _type, descriptionOverride, ctaText, expirationDate, googleTagEvent, stay->{\n          _id, title, type, slug, overviewText, pricingDisclaimer,\n          "heroImage":  heroImages[0].image.asset->url\n        }\n      },\n      _type == "Offer" => {\n        _type,\n        descriptionOverride,\n        ctaText,\n        expirationDate,\n        googleTagEvent,\n        offer->{\n          _id,\n          title,\n          slug,\n          "markets": markets,\n          "heroImage": coverImage.image.asset->url,\n          akOffer[]->{\n          items[]{\n            description,\n            markets,\n          },\n        },\n        },\n      },\n      _type == "editorial" => {\n        _type,\n        expirationDate,\n        googleTagEvent,\n        title,\n        labelText,\n        labelColor,\n        richText,\n        "heroImage": cardImage.image.asset->url\n      }\n    }\n    },\n    "heroItems": heroItems[]->{\n        _id,\n        _type,\n        title,\n        sectionId,\n        cssClass,\n        rotationTimer,\n        "markets": markets,\n        "slides": slides[]{\n          _type == "heroWithVideoExpiration" => {\n            _key,\n            title,\n            content,\n            expirationDate,\n            googleTagEvent,\n            sectionId,\n            cssClass,\n            "video": video.asset->url,\n            "poster": poster.image.asset->url,\n            "videoMobile": videoMobile.asset->url,\n            "posterMobile": posterMobile.image.asset->url\n          },\n          _type == "heroWithPicture" => {\n            _key,\n            title,\n            content,\n            expirationDate,\n            googleTagEvent,\n            sectionId,\n            cssClass,\n            "desktopImage": desktopImage.image.asset->url,\n            "mobileImage": mobileImage.image.asset->url\n          },\n          _type == "slide" => {\n            _key,\n            title,\n            content,\n            "cta": cta {\n              ...,\n              "landingPageRoute": landingPageRoute->.slug.current\n            },\n            "backgroundVideo": backgroundVideo.asset->url,\n            "backgroundVideoPlaceholder": {\n              "image": backgroundVideoPlaceholder.image.asset->url,\n              "alt": backgroundVideoPlaceholder.alt\n            },\n            "backgroundVideoMobile": backgroundVideoMobile.asset->url,\n            "backgroundVideoPlaceholderMobile": {\n              "image": backgroundVideoPlaceholderMobile.image.asset->url,\n              "alt": backgroundVideoPlaceholderMobile.alt\n            },\n            "backgroundImage": {\n              "image": backgroundImage.image.asset->url,\n              "alt": backgroundImage.alt\n            },\n            "backgroundImageMobile": {\n              "image": backgroundImageMobile.image.asset->url,\n              "alt": backgroundImageMobile.alt\n            },\n            "desktopImage": {\n              "image": desktopImage.image.asset->url,\n              "alt": desktopImage.alt\n            },\n            "mobileImage": {\n              "image": mobileImage.image.asset->url,\n              "alt": mobileImage.alt\n            },\n            "googleTagEvent": googleTagEvent,\n            "sectionId": sectionId,\n            "cssClass": cssClass,\n          }\n        }\n      },\n	  \'team\': ',",\n	  'teamGroup': ",",\n    'variations': ","\n  }\n"]);return o=function(){return e},e}function c(){let e=(0,a._)(["\n  *[_id == 'frontpage'][0]{\n    title,\n    ","\n  }\n  +\n  ","\n"]);return c=function(){return e},e}function u(){let e=(0,a._)(["\n *[_type == 'localOffice'] {\n  ...,\n  'slug': slug.current,\n coordinates,\n  content[]{\n    ...,\n     dmcOffers[]->{\n      coverImage, title,  'smallDesc': description[0].children[0].text, 'slug': slug.current\n    }\n  }\n}\n"]);return u=function(){return e},e}function l(){let e=(0,a._)(["\n*[_type == 'dmcOffer' && dmc->.slug.current == $slug]{\n  ...,\n  'slug': slug.current,\n  dmc->{\n    ...,\n    'slug': slug.current\n  }\n}\n"]);return l=function(){return e},e}function y(){let e=(0,a._)(["\n*[_type == 'event' && uniqueId.current == $uniqueId][0]{\n  ...,\n  'uniqueId': uniqueId.current,\n}\n"]);return y=function(){return e},e}function d(){let e=(0,a._)(['\n    ...,\n    dayByDay[]{\n      ...,\n      mapInfo[]{...},\n      hotelList[]->{ photos, title, location, description, accommodations[]->{...} },\n      accommodations[]{\n        ...,\n        accommodation->{\n          ..., photos, title, location, description,\n          "country": select(\n            city->_type=="geotree.district" => city->city->country->name,\n            city->country->name\n          ),\n          "city": {"country": select(\n            city->_type=="geotree.district" => city->city->country->,\n            city->country->\n          )},\n          accommodations[]->{...}\n        },\n      },\n      akpProject,\n      transfer { departure, duration, destiny, \'icon\':transportType->.icon.icon }\n    },\n    dates[]{\n      ...,\n      "suites": listOfSuitesPrices[]{..., suiteRef->{...}},\n      offers[]{\n        ...,\n        "offerSlug": *[_type==\'offer\' && !(_id in path("drafts.**")) && references(^.offer._ref)][0].slug.current,\n        "markets": *[_type==\'offer\' && !(_id in path("drafts.**")) && references(^.offer._ref)][0].markets,\n        offer->\n      },\n      extensions[]->{\n        ...,\n        initialPrices[]{..., hotel{..., accommodation->}},\n        dayByDay[]{\n          ...,\n          accommodations[]{\n            ...,\n            accommodation->{..., photos, title, location, description, \n              city->{ country->{...} }, accommodations[]->{...}\n            }\n          }\n        }\n      }\n    },\n    offers[]{\n      ...,\n      "offerSlug": *[_type==\'offer\' && !(_id in path("drafts.**")) && references(^.offer._ref)][0].slug.current,\n      "markets": *[_type==\'offer\' && !(_id in path("drafts.**")) && references(^.offer._ref)][0].markets,\n      offer->\n    },\n    prices[]->{..., listOfSuitesPrices[]{...,suiteRef->{...}}},\n    property->,\n    \'video\': heroVideo.video.asset->.url, \'video2\': video.video.asset->.url,\n    shipOrJetInfo->{..., image[]{...}},\n    people[]->,\n    journeyTestimonials[]->{...},\n    \'details\': journeyDetails[]{..., "icon": icon.icon},\n    advantages[]{..., "icon": icon.icon,\n      callToAction{..., "route": "/"+route->slug.current}\n    },\n    whereToStay[]->{\n      \'image\': coverImage.image, title, description, \'slug\':slug.current, photos\n    },\n    extensions[]->{\n      ...,\n      dayByDay[]{\n        ...,\n        hotelList[]->{ photos, title, location, description },\n        akpProject->{ link, description, title, image },\n        transfer { departure, duration, destiny, \'icon\':transportType->.icon.icon }\n      },\n    },\n    privatePackage{\n      ...,\n      linkedPrivatePackage-> {\n        _type, \'slug\': slug.current,\n        \'heroImage\': heroImages[0]\n      },\n    },\n    \'highlightPdf\':essentialInfo.asset->.url\n']);return d=function(){return e},e}function p(){let e=(0,a._)(['\n    *[(_type == "tailorMades" || (_type == "journeys" && !(packageTypeId in [8, 17, 28, 40, 42]))) && references($id)]{\n      ...,\n      hotspots {\n        areas[!additional]{\n          additional, initialLength,\n          "city": city->.name,\n        }\n      },\n      "dayByDay": dayByDay[day % 1 == 0]{\n        day, dayTitle, mapInfo,\n        cities[] {\n          city,\n        },\n        cityName\n      },\n      \'offers\': dates[].offers[]{\n        "offerDocument": *[_type == "offer" && references(^.offer._ref)][0]{\n          _id, markets, title, shortTitle, weight,\n          "akOffer": akOffer[]->{\n            _id, items[]{markets, shortTitle}, \'journeys\':array::compact(journeys[]->{_id, code})\n          }\n        }\n      }.offerDocument,\n      "slug": select(_type == "journeys" => "/journeys/"+slug.current, "/"+slug.current),\n      "code": code,\n      "subType": subType,\n      "type": type,\n      "photo": heroImages[0].image.asset._ref,\n      "companyID": array::unique(coalesce(initialPrices[display==true].companyID,companyIDs,[])),\n      "prices": coalesce(select(\n          packageTypeId in [11,16,19,21,43] => dates[].listOfSuitesPrices[].prices[]{currency,price},\n          dates[].prices[]{currency,price},\n        ), coalesce(initialPrices[]{currency,price}, [])),\n      "tags": array::unique(coalesce(tags,[])),\n      "travelStyles": array::unique(coalesce(categories,[])),\n      "duration": coalesce(lengthDays,initialDuration)\n    }\n  ']);return p=function(){return e},e}let g=(0,r.Z)(o(),s.xz.join(","),i.bl,i.Px,i.fL);(0,r.Z)(c(),g,i.pC),(0,r.Z)(u()),(0,r.Z)(l()),(0,r.Z)(y());let m=async(e,n)=>await e.fetch("\n  *[_type=='dmcWebinar' && dmc->slug.current==$slug]{\n    title, markets, webinars\n  }",{slug:n}),f=(e,n)=>e.fetch('*[_type == "dmcMarketingResources" && references(*[_type=="localOffice" && slug.current==$slug]._id) && !(_id in path("drafts.**"))\n    ] {\n      _id,\n      title,\n      description,\n      "coverImage": coverImage.asset->url,\n      "resourceFile": resourceFile.asset->url\n    }',{slug:n}),_=async(e,n)=>await e.fetch('\n  *[_type==\'dmcNewsMedia\' \n    && references(*[_type=="localOffice" && slug.current==$country]._id)\n    && !(_id in path("drafts.**"))\n    && publishedAt <= now()\n  ]{\n    title,\n    markets,\n    content,\n    slug,\n    publishedAt,\n    coverImage {\n      asset->{\n        url,\n        metadata\n      }\n    }\n  }',{country:n});(0,r.Z)(d());let h=async(e,n)=>{let t=(0,r.Z)(p());return await e.fetch(t,{id:n})}},64210:function(e,n,t){t.d(n,{HP:function(){return s},Px:function(){return i},bl:function(){return r},fL:function(){return c},pC:function(){return l}});let a='\n  ..., _key, _type, sectionId, cssClass, title, layout, rows, isSlider, "className": cssClass,\n  "featuredStories": featuredStories[]->{..., "category": category->},\n  "featuredOffers": featuredOffers[]-> {\n    _id, title, coverImage, markets, description, alternativeDescription, _type,\n    slug, cruises[@._ref in [^.^.^.^.^._id]], expirationDate, cardImages, informations\n  },\n  "talents": *[_type=="extraVoyageDetails" && !string::startsWith(_id,\'drafts.\') && voyage._ref == ^.^._id].talents[]->\n  {_rev, photoThumb, photo, bio, shortDescription, note, name, \'specialty\':specialty->.title,\n   "voyages": *[_type==\'extraVoyageDetails\' && !string::startsWith(_id,\'drafts.\') && voyage._ref != ^.^.^._id && ^._id in talents[]._ref].voyage->{\n        "worldCruises": {\n          destinations, countries, wonders,\n          "video": ^.cruisePic->.video.asset->.url, "poster": ^.cruisePic->.poster.image.asset->url,\n          "videoMobile": ^.cruisePic->.videoMobile.asset->.url, "posterMobile": ^.cruisePic->.posterMobile.image.asset->url\n        },\n        title, bookingReferenceNumber, "ship":shipCod->.ship,\n        "price": *[_type==\'group_price\' && bookingReferenceNumber==^.bookingReferenceNumber && suiteCategoryGroupCod!=\'OS\']\n        {"priceSum": portCharge + priceDouble, currency} | order(priceSum asc){priceSum, currency},\n        "mapPNG":cruisePic->.mapPNG.image.asset->._id,\n        startDate, debarkDate, "debarkCity":bookingName, "embarkCity":bookingName,\n        duration, "slug":slug.current,\n        "destination": destinationID->{\n          "title": destinationName,\n          "image": ^.cruisePic->.photo1.image,\n          "color": color.hex,\n          "images": array::compact([^.cruisePic->.photo1.image, ^.cruisePic->.photo2.image])\n        },\n        "itinerariesCount": length(array::unique(*[_type=="itinerary" && voyageID._ref==^._id].cityCod->.city)),\n      }\n  },\n  "ships": ships[]->{\n    "shipCode": shipcod, "name": ship, images, capacity, builtDate, spaceRatio, description,\n  },\n  textIllustrationItems[]{\n    _key, _type, title, sectionId, cssClass, text, illustration\n  },\n  "brochure": select(\n    _type==\'brochureModule\' => *[_type==\'brochures\' && ^.^.^.destinationID._ref in destinations[]._ref][0]\n  ),\n  "onlandExtensions": select(\n    _type==\'featuredOnland\' => *[_type==\'onland_extensions\' && ^.^._id in (voyages[]._ref)] {\n      name, picture, duration, durationType, price, description,\n      "slug": slug.current, "packageType": type\n    }\n  )\n',r="\n       team[]{\n          ...,\n          'members': members[]->".concat("\n  {_id, _type, name, contactInfo, photo, bio, email, region, department, position}\n","\n      }\n"),i="\n       teamGroup[]{\n          ...,\n         ".concat(r,"\n      }\n");"\n 		*[_id == 'siteSettings'][0]{\n			privateAreaSidebar->{\n        		_type, _id, title, logo, mobileLogo, items[]{\n        			_key, title, markets, route, 'menuId': page->.slug.current, 'page':page->{\n						'title': page->.title,\n            			'slug':slug.current, \n                  'content':page->.content[]{\n    						..., title, _type,\n    						'videoDesktop': videoDesktop.asset->.url,\n    						'videoMobile': videoMobile.asset->.url,\n							'offers': offers[]->{..., \"slug\": slug.current},\n							'team': ".concat(r,",\n							'teamGroup': ").concat(i,"\n  						}\n          			}\n        		}\n			}\n    	}\n"),"\n 		*[_id == 'siteSettings'][0]{\n			guestPrivateAreaSidebar->{\n        		_type, _id, title, logo, mobileLogo, items[]{\n        			_key, title, route, 'menuId': page->.slug.current, 'page':page->{\n						'title': page->.title,\n            			'slug':slug.current, 'content':page->.content[]{\n    						..., title, _type,\n    						'videoDesktop': videoDesktop.asset->.url,\n    						'videoMobile': videoMobile.asset->.url,\n							'offers': offers[]->{..., \"slug\": slug.current},\n							'team': ".concat(r,",\n							'teamGroup': ").concat(i,"\n  						}\n          			}\n        		}\n			}\n    	}\n"),'\n  title,\n  "tabs": tabs[]{googleTagEvent, disabled, baseComponent, name, "innerSections":innerSections[]{'.concat(a,'}, descriptions},\n  "globalsSections": globalSections[]{').concat(a,"}\n");let s="\n*[_type == \"dmcOffer\" && dmc->.slug.current == $slug && !(_id in path(\"drafts.**\"))]{\n  ...,\n  'smallDesc': description[0].children[0].text,\n  'slug': slug.current,\n  dmc->{\n    ...,\n    'slug': slug.current\n  }\n}\n",o='\n  "photo": heroImages[0].image.asset._ref,\n  type,\n  title,\n  "slug": "/stays/" + slug.current,\n  "prices": startingPrices, pricingDisclaimer,\n  "destinations":array::compact(array::unique(\n    [country->.continent->.name, city->.continent->.name]\n  )),\n  "suites": length(array::unique(dates[].suites[].suiteRef->name)),\n  "tags": array::unique(coalesce(tags,[])),\n  "country": [country->.name],\n  "locations": [select(\n    city->.name != null && country->.name != null => city->.name + \', \' + country->.name,\n    city->.name != null => city->.name,\n    country->.name != null => country->.name,\n  )],\n  "years": array::compact(array::unique(\n    dates[]{"start": string::split(travelStartDate,"-")[0]}.start\n    +\n    dates[]{"end": string::split(travelEndDate,"-")[0]}.end\n  )),\n  "months": array::unique(array::compact(\n    dates[]{"start":\n      select(\n        string::split(travelStartDate,"-")[1] == "01" => "January",\n        string::split(travelStartDate,"-")[1] == "02" => "February",\n        string::split(travelStartDate,"-")[1] == "03" => "March",\n        string::split(travelStartDate,"-")[1] == "04" => "April",\n        string::split(travelStartDate,"-")[1] == "05" => "May",\n        string::split(travelStartDate,"-")[1] == "06" => "June",\n        string::split(travelStartDate,"-")[1] == "07" => "July",\n        string::split(travelStartDate,"-")[1] == "08" => "August",\n        string::split(travelStartDate,"-")[1] == "09" => "September",\n        string::split(travelStartDate,"-")[1] == "10" => "October",\n        string::split(travelStartDate,"-")[1] == "11" => "November",\n        string::split(travelStartDate,"-")[1] == "12" => "December",\n      )\n    }.start\n    +\n    dates[]{"end":\n      select(\n        string::split(travelEndDate,"-")[1] == "01" => "January",\n        string::split(travelEndDate,"-")[1] == "02" => "February",\n        string::split(travelEndDate,"-")[1] == "03" => "March",\n        string::split(travelEndDate,"-")[1] == "04" => "April",\n        string::split(travelEndDate,"-")[1] == "05" => "May",\n        string::split(travelEndDate,"-")[1] == "06" => "June",\n        string::split(travelEndDate,"-")[1] == "07" => "July",\n        string::split(travelEndDate,"-")[1] == "08" => "August",\n        string::split(travelEndDate,"-")[1] == "09" => "September",\n        string::split(travelEndDate,"-")[1] == "10" => "October",\n        string::split(travelEndDate,"-")[1] == "11" => "November",\n        string::split(travelEndDate,"-")[1] == "12" => "December",\n      )\n    }.end\n  )),\n',c='\n  variations[]{\n    ...,\n    "stays": select(\n      length(stays)>0 => stays[]->{'.concat(o,'},\n      length(\n        array::compact(stayFilters.regions + stayFilters.countries + stayFilters.categories + stayFilters.months + stayFilters.years)\n      ) > 0 => *[\n        _type=="stays" && !(_id in path("drafts.**"))\n        && (count(^.stayFilters.regions)==0 || array::intersects(\n          array::compact([country->.continent->.name, city->.continent->.name]),\n          ^.stayFilters.regions\n        ))\n        && (count(^.stayFilters.countries)==0 || array::intersects(\n          array::compact([country->.continent->.name]),\n          ^.stayFilters.countries\n        ))\n        && (count(^.stayFilters.categories)==0 || type in ^.stayFilters.categories)\n        && (count(^.stayFilters.years)==0 || array::intersects(\n          array::compact([\n            {\n              "years": array::compact(array::unique(\n                dates[]{"start": string::split(travelStartDate,"-")[0]}.start\n                +\n                dates[]{"end": string::split(travelEndDate,"-")[0]}.end\n              ))\n            }.years\n          ]),\n          ^.stayFilters.years\n        ))\n      ] {').concat(o,'},\n      stays\n    ),\n    "journeys": select(\n      length(journeys)>0 => journeys[]->{\n        \'photo\': heroImages[0].image.asset._ref,\n        "capacity": groupSize,\n        "duration": coalesce(lengthDays, initialDuration),\n        "objectID": _id,\n        "photo": heroImages[0].image.asset._ref,\n        "slug": select(\n          string::startsWith(_id, \'tailor\')=> slug.current,\n          \'/journeys/\'+slug.current\n        ),\n        title,\n        "travelStyles": array::unique(categories),\n        "minorType": type,\n        "type": select(\n          string::startsWith(_id, \'tailor\') => \'Tailormade Journeys\',\n          coalesce(subType, type)\n        ),\n        "companyID": select(\n          string::startsWith(_id, \'tailor\') => array::unique(coalesce(initialPrices[display==true].companyID,companyIDs,[])),\n          [3000,1000,401] \n        ),\n        \'tags\': array::unique(coalesce(tags,[])),\n        "prices": coalesce(select(\n          packageTypeId in [11,16,19,21,43] => dates[].listOfSuitesPrices[].prices[]{currency,price},\n          dates[].prices[]{currency,price},\n        ), coalesce(initialPrices[]{currency,price}, [])),\n        "destinations": array::unique(\n          array::compact(array::unique(\n            dayByDay[].cities[].cityID->\n            {name,country->{name,continent->{name}}}.country.continent.name\n            +\n            dayByDay[].cities[].cityID->.city->\n            {name,country->{name,continent->{name}}}.country.continent.name\n          ))\n          +\n          array::compact(array::unique(\n            hotspots.areas[].city->\n            {name,country->{name,continent->{name}}}.country.continent.name\n          ))\n        ),\n        "countries": array::unique(\n          array::compact(array::unique(\n            dayByDay[].cities[].cityID->\n            {name,country->{name,continent->{name}}}.country.name\n            +\n            dayByDay[].cities[].cityID->.city->\n            {name,country->{name,continent->{name}}}.country.name\n          ))\n          +\n          array::compact(array::unique(\n            hotspots.areas[].city->\n            {name,country->{name,continent->{name}}}.country.name\n          ))\n        ),\n        initialPrices[]{\n        ...\n        },\n        dayByDay[]{\n        ...,\n        accommodations[]{\n          ...,\n          accommodation->{\n            name,\n            title\n          }\n        }\n      },\n      hotspots {\n        ...,\n        areas[]{\n          additional, initialLength,\n          "city": city->.name,\n          accommodations[]{\n            ...,\n            accommodation->{\n              title\n            }\n          }\n        }\n      },\n      offerFlags\n      },\n      length(\n        array::compact(journeyFilters.regions + journeyFilters.countries + journeyFilters.types + journeyFilters.categories + journeyFilters.years)\n      )>0 => \n        *[_type=="journeys" && !(_id in path("drafts.**")) && hasAvailableDates && !(packageTypeId in [17,28,40,42])\n          && (count(^.journeyFilters.regions)==0 || array::intersects(\n            array::compact(array::unique(\n              dayByDay[].cities[].cityID->.country->.continent->.name + dayByDay[].cities[].cityID->.city->.country->.continent->.name\n            )),\n            ^.journeyFilters.regions\n          ))\n          && (count(^.journeyFilters.countries)==0 || array::intersects(\n            array::compact(array::unique(\n              dayByDay[].cities[].cityID->.country->.name + dayByDay[].cities[].cityID->.city->.country->.name\n            )),\n            ^.journeyFilters.countries\n          ))\n          && (count(^.journeyFilters.types)==0 || subType in ^.journeyFilters.types)\n          && (count(^.journeyFilters.categories)==0 || array::intersects(\n            array::compact(array::unique(categories)),\n            ^.journeyFilters.categories\n          ))\n          && (count(^.journeyFilters.years)==0 || year in ^.journeyFilters.years)\n        ] {\n          \'photo\': heroImages[0].image.asset._ref,\n          "capacity": groupSize,\n          "duration": coalesce(lengthDays, initialDuration),\n          "objectID": _id,\n          "photo": heroImages[0].image.asset._ref,\n          "slug": select(\n            string::startsWith(_id, \'tailor\')=> slug.current,\n            \'/journeys/\'+slug.current\n          ),\n          title,\n          "travelStyles": array::unique(categories),\n          "type": select(\n            string::startsWith(_id, \'tailor\') => \'Tailormade Journeys\',\n            coalesce(subType, type)\n          ),\n          "companyID": select(\n            string::startsWith(_id, \'tailor\') => array::unique(coalesce(initialPrices[display==true].companyID,companyIDs,[])),\n            [3000,1000,401] \n          ),\n          \'tags\': array::unique(coalesce(tags,[])),\n          "prices": coalesce(select(\n            packageTypeId in [11,16,19,21,43] => dates[].listOfSuitesPrices[].prices[]{currency,price},\n            dates[].prices[]{currency,price},\n          ), coalesce(initialPrices[]{currency,price}, [])),\n          "destinations": array::unique(\n            array::compact(array::unique(\n              dayByDay[].cities[].cityID->\n              {name,country->{name,continent->{name}}}.country.continent.name\n              +\n              dayByDay[].cities[].cityID->.city->\n              {name,country->{name,continent->{name}}}.country.continent.name\n            ))\n            +\n            array::compact(array::unique(\n              hotspots.areas[].city->\n              {name,country->{name,continent->{name}}}.country.continent.name\n            ))\n          ),\n          "countries": array::unique(\n            array::compact(array::unique(\n              dayByDay[].cities[].cityID->\n              {name,country->{name,continent->{name}}}.country.name\n              +\n              dayByDay[].cities[].cityID->.city->\n              {name,country->{name,continent->{name}}}.country.name\n            ))\n            +\n            array::compact(array::unique(\n              hotspots.areas[].city->\n              {name,country->{name,continent->{name}}}.country.name\n            ))\n          ),\n        },\n      []\n    ) \n  }\n'),u='\n    "navMenu": {\n      "logo": navMenu->{"alt": illustration.image.alt, "image": illustration.image.asset},\n      "address": navMenu->address,\n      "phone": navMenu->.phone,\n      "items": navMenu->.items[]{\n        _key, kind, sectionId, title, route, "CSSClass": class, "page": "/" + landingPageRoute->slug.current,\n        subMenus[]{ _key, kind, _type, title, route, "CSSClass": class, "image": image.image,\n          "page": "/" + landingPageRoute->slug.current,\n           subMenus[]{ _key, kind, title, sectionId, route, "CSSClass": class, _type,\n               "page": "/" + landingPageRoute->slug.current,\n           },\n        }\n      },\n      "disclaimer": formDisclaimer\n    },\n	  navMenu->{\n      ..., "contactInfo": *[_type==\'standaloneContactInfo\']{_rev,market,phone,information},\n	    "popularMenu": items[_type == "navigationItemForMarkets"][0]{..., "items": items[]->},\n	    "logo": {"alt": illustration.alt, "image": illustration.image.asset},\n      items[]{..., \n		    \'highlightedMenuContent\': *[_type==\'standaloneMenuHighlights\' && !(_id in path("drafts.**")) && menu.menuKey==^._key],\n		    \'subMenus\': subMenus[]{\n        	...,\n        	\'highlightedMenuContent\': *[_type==\'standaloneMenuHighlights\' && !(_id in path("drafts.**")) && menu.menuKey==^._key],\n        }, \n		    \'page\': page->{title, \'slug\': "/" + slug.current, \'content\': page->.content}\n      }\n    },\n    "footer": {\n      "onSubscribeSuccess": footer->.onSubscribeSuccess,\n      "footerBody": footer->.footerBody,\n      "showForm": footer->.showForm,\n      "termsAndConditions": footer->.termsAndConditions,\n      "columns": footer->.columns,\n      "logo": footer->{"alt": illustration.image.alt, "image": illustration.image.asset},\n      "items": footer->.items[]{\n        ...,\n        subMenus[]{\n          ...,\n          "page": page->.slug.current\n        },\n      },\n      "socialMedia": footer->socialMedia[]{\n        ...,\n      },\n      "travelAssociations": footer->travelAssociations[]{\n        ...,\n        "illustration": illustration{\n          "alt": image.alt,\n          "image": image.asset\n        }\n      }\n    }\n',l="\n  *[_type == \"siteSettings\" && !string::startsWith(_id,'drafts.')][0] {\n    ".concat(u,"\n  }\n");"\n  *[_type == \"siteSettings\" && !string::startsWith(_id,'drafts.')][0] {\n    ".concat(u,",\n    \"agentMenus\": privateAreaSidebar->.items[]{\n      _key, title, markets, route, 'menuId': page->.slug.current,\n      'page':page->{\n        'title': page->.title,\n        'slug':slug.current, 'content':page->.content[]{\n          ..., title, _type,\n          'videoDesktop': videoDesktop.asset->.url,\n          'videoMobile': videoMobile.asset->.url,\n          'offers': offers[]->{..., \"slug\": slug.current},\n          'team': ").concat(r,",\n          'teamGroup': ").concat(i,"\n        }\n      }\n    },\n    \"guestMenus\": guestPrivateAreaSidebar->.items[]{\n      _key, title, route, 'menuId': page->.slug.current,\n      'page':page->{\n        'title': page->.title,\n        'slug':slug.current,\n        'content':page->.content[]{\n          ..., title, _type,\n          'videoDesktop': videoDesktop.asset->.url,\n          'videoMobile': videoMobile.asset->.url,\n          'offers': offers[]->{..., \"slug\": slug.current},\n          'team': ").concat(r,",\n          'teamGroup': ").concat(i,"\n        }\n      }\n    }\n  }\n");let y='{\n  overviewText, map, includesInternalAir, _id, code,\n  \'offers\': *[_type==\'journeys\' && !(_id in path("drafts.**")) && code == ^.code].dates[].offers[]{\n    "offerDocument": *[_type == "offer" && references(^.offer._ref)][0]{\n      _id,\n      "akOffer": akOffer[]->{\n        isPrepaid, items[], _id, journeys[]->{_id, code, title}\n      },\n      title, shortTitle, slug, markets, expirationDate, weight\n    }\n  }.offerDocument,\n  "dayByDay": dayByDay[day % 1 == 0]{\n    day, dayTitle, mapInfo,\n    cities[] {\n      city,\n    },\n    cityName\n  },\n  "initialPrices": initialPrices[display == true]{ display, currency, price },\n  "allDates": *[_type==\'journeys\' && !(_id in path("drafts.**")) && code == ^.code].dates[]{\n    travelStartDate,\n    travelEndDate,\n    offers[]{\n      ...,\n      offer->{ items }\n    },\n    prices[]{ price, currency },\n    listOfSuitesPrices[]{ prices[]{ price, currency }}\n  },\n  "tags": array::unique(coalesce(tags,[])),\n  hotspots {\n    ...,\n    areas[]{\n      ...,\n      additional,\n      initialLength,\n      "city": city->.name,\n    }\n  },\n  "capacity": groupSize,\n  "prices": array::unique(select(\n    _type==\'tailorMades\' => initialPrices[price > 0]{currency,price},\n    packageTypeId in [11,16,19,21,43] => *[_type==^._type && !(_id in path("drafts.**"))\n      && code == ^.code].dates[].listOfSuitesPrices[].prices[price > 0]{currency,price},\n    packageTypeId in [35,36,39,44] => coalesce(*[_type==^._type && !(_id in path("drafts.**"))\n      && code == ^.code].initialPrices[display==true && price > 0]{currency,price},[]),\n    *[_type==^._type && !(_id in path("drafts.**"))\n      && code == ^.code].dates[].prices[price > 0]{currency,price}\n    )\n  ),\n  "photo": heroImages[0].image.asset._ref,\n  title, subTitle, \'type\': select(_type == "journeys" => subType, type), \'image\': heroImages[0], subType,\n  \'duration\': select(type == "Tailormade Journeys" => initialDuration, lengthDays), groupSize,\n  "slug": select(_type == "journeys" => "/journeys/"+slug.current, "/"+slug.current),\n  \'companyIDs\': select(\n    packageTypeId in [35,36,39,44] => array::unique(coalesce(initialPrices[display==true].companyID,companyIDs,[])),\n    companyIDs\n  ),\n  \'countries\': array::unique(\n    dayByDay[].cities[].cityID->.country->.name + dayByDay[].cities[].cityID->.city->.country->.name\n  ),\n  \'dates\': dates[]{ travelStartDate, travelEndDate, prices[]{ price, currency }},\n  \'initialPrices\': initialPrices[display == true && price > 0]{ display, currency, price }\n}';'highlightedJourneys {\n          carouselHighlightedJourneysTitle, markets, isAutoPopulate, showPrice, contentOutsideCard,\n          journeys[]{\n            _type == "reference" => @->'.concat(y,',\n            _type == "journeyWithCustomBanner" => {\n              "journey": journey->').concat(y,",\n              \"customBanner\": customBanner\n            }\n          },\n          'journeyFinderOrderingSettings': *[_type==\"journeyFinderOrdering\" && !(_id in path(\"drafts.**\"))],\n          'journeyFinderSortSettings': *[_type == \"journeyFinderSortSettings\" && !(_id in path(\"drafts.**\"))] {\n            markets, \"types\": types[].type, \"countries\": countries[]->.name, setDefaultPrivateTravel,\n          },\n          'journeysFromFilters': *[_type=='journeys' && !(_id in path(\"drafts.**\")) && hasAvailableDates\n          && !(packageTypeId in [17,28,40,42]) && defined(subType)\n          && (count(^.journeyFilters.regions)==0 || array::intersects(\n            array::compact(array::unique(\n              dayByDay[].cities[].cityID->.country->.continent->.name + dayByDay[].cities[].cityID->.city->.country->.continent->.name\n            )),\n            ^.journeyFilters.regions\n          ))\n          && (count(^.journeyFilters.countries)==0 || array::intersects(\n            array::compact(array::unique(\n              dayByDay[].cities[].cityID->.country->.name + dayByDay[].cities[].cityID->.city->.country->.name\n            )),\n            ^.journeyFilters.countries\n          ))\n          && (count(^.journeyFilters.types)==0 || subType in ^.journeyFilters.types)\n          && (count(^.journeyFilters.categories)==0 || array::intersects(\n            array::compact(array::unique(categories)),\n            ^.journeyFilters.categories\n          ))\n          && (count(^.journeyFilters.years)==0 || year in ^.journeyFilters.years)\n          ]{\n            title, 'type': subType, 'duration': lengthDays, groupSize, 'slug': '/journeys/'+slug.current,\n            'image': heroImages[0],\n            'companyIDs': select(\n              packageTypeId in [35,36,39,44] => array::unique(coalesce(initialPrices[display==true].companyID,companyIDs,[])),\n              companyIDs\n            ),\n            'countries': array::unique(coalesce(\n              dayByDay[].cities[].cityID->.country->.name + dayByDay[].cities[].cityID->.city->.country->.name,\n              []\n            )[defined(@)]),\n            'dates': dates[]{ travelStartDate, travelEndDate, prices[]{ price, currency }, listOfSuitesPrices[]{ prices[]{ price, currency }}\n            },\n            'initialPrices': initialPrices[display == true]{ display, currency, price }\n          }\n          +\n          *[_type=='tailorMades' && !(_id in path(\"drafts.**\"))\n          && (count(^.journeyFilters.types)==0 || 'Tailormade Journeys' in ^.journeyFilters.types)\n          && (count(^.journeyFilters.regions)==0 || array::intersects(\n            array::compact(array::unique(\n              hotspots.areas[!additional].city->.country->.continent->.name + hotspots.areas[!additional].city->.city->.country->.continent->.name\n            )),\n            ^.journeyFilters.regions\n          ))\n          && (count(^.journeyFilters.countries)==0 || array::intersects(\n            array::compact(array::unique(\n              hotspots.areas[!additional].city->.country->.name + hotspots.areas[!additional].city->.city->.country->.name\n            )),\n            ^.journeyFilters.countries\n          ))\n          && (count(^.journeyFilters.categories)==0 || array::intersects(\n            array::compact(array::unique(categories)),\n            ^.journeyFilters.categories\n          ))\n          ]{\n            code, title, 'type': 'Tailormade Journeys', 'duration': initialDuration, groupSize, 'slug': '/'+slug.current, 'image': heroImages[0],\n            'companyIDs': array::unique(coalesce(initialPrices[display==true].companyID,companyIDs,[])),\n            'countries': array::unique(coalesce(\n              hotspots.areas[!additional].city->.country->.name + hotspots.areas[!additional].city->.city->.country->.name,\n              []\n            )[defined(@)]),\n            'initialPrices': initialPrices[display == true]{ display, currency, price }\n          }\n        }")}}]);